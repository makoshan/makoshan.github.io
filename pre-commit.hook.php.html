<div class="sourceCode" id="cb1"><pre class="sourceCode PHP"><code class="sourceCode php"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/usr/bin/env php</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="ot">?</span>php</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="va">$force</span> <span class="op">=</span> <span class="pp">@</span><span class="va">$argv</span>[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&quot;--force&quot;</span><span class="ot">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="va">$build_dir</span> <span class="op">=</span> <span class="cn">__DIR__</span><span class="ot">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="va">$static_dir</span> <span class="op">=</span> <span class="st">&quot;</span>{<span class="va">$build_dir</span>}<span class="st">/..&quot;</span><span class="ot">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$force</span> <span class="op">||</span> (<span class="st">`git diff-index --cached HEAD -- </span>{<span class="va">$static_dir</span>}<span class="st">/css/colors.css </span>{<span class="va">$static_dir</span>}<span class="st">/css/dark-mode-adjustments.css`</span>)) {</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">require_once</span>(<span class="st">&quot;</span>{<span class="va">$build_dir</span>}<span class="st">/build_css.php&quot;</span>)<span class="ot">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`git add </span>{<span class="va">$static_dir</span>}<span class="st">/css/.`</span><span class="ot">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$force</span> <span class="op">||</span> (<span class="st">`git diff-index --cached HEAD -- </span>{<span class="va">$static_dir</span>}<span class="st">/css/colors.css </span>{<span class="va">$static_dir</span>}<span class="st">/css/initial.css </span>{<span class="va">$static_dir</span>}<span class="st">/css/dark-mode.css </span>{<span class="va">$static_dir</span>}<span class="st">/js/gw-inline.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/darkmode-inline.js`</span>)) {</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">require_once</span>(<span class="st">&quot;</span>{<span class="va">$build_dir</span>}<span class="st">/build_head_includes.php&quot;</span>)<span class="ot">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">`git add </span>{<span class="va">$static_dir</span>}<span class="st">/includes/.`</span><span class="ot">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="va">$force</span> <span class="op">||</span> (<span class="st">`git diff-index --cached HEAD -- </span>{<span class="va">$static_dir</span>}<span class="st">/css/fonts.css </span>{<span class="va">$static_dir</span>}<span class="st">/css/default.css </span>{<span class="va">$static_dir</span>}<span class="st">/css/links.css </span>{<span class="va">$static_dir</span>}<span class="st">/js/popups.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/extracts.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/extracts-options.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/image-focus.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/tablesorter.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/typography.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/rewrite.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/collapse.js </span>{<span class="va">$static_dir</span>}<span class="st">/js/darkmode.js`</span>)) {</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">require_once</span>(<span class="st">&quot;</span>{<span class="va">$build_dir</span>}<span class="st">/build_versioned_includes.php&quot;</span>)<span class="ot">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">`git add </span>{<span class="va">$static_dir</span>}<span class="st">/includes/.`</span><span class="ot">;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="kw">?&gt;</span></span></code></pre></div>
