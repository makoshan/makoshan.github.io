<div class="sourceCode" id="cb1"><pre class="sourceCode Javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="bu">window</span><span class="op">.</span><span class="at">Extracts</span>) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/*  Popins.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">        */</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">//  Extracts.popinOptionsEnabled = true;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">showPopinOptionsDialogPopinTitleBarButton</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> button <span class="op">=</span> Popins<span class="op">.</span><span class="at">titleBarComponents</span><span class="op">.</span><span class="fu">optionsButton</span>()<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="fu">addActivateEvent</span>((<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>            <span class="bu">event</span><span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">showPopinOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="at">title</span> <span class="op">=</span> <span class="st">&quot;Show popin options (enable/disable popins)&quot;</span><span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">&quot;show-popin-options-dialog&quot;</span>)<span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/*  Popups.</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">        */</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">popupOptionsEnabled</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">showPopupOptionsDialogPopupTitleBarButton</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> button <span class="op">=</span> Popups<span class="op">.</span><span class="at">titleBarComponents</span><span class="op">.</span><span class="fu">optionsButton</span>()<span class="op">;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="fu">addActivateEvent</span>((<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>            <span class="bu">event</span><span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">showPopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="at">title</span> <span class="op">=</span> <span class="st">&quot;Show popup options (enable/disable popups)&quot;</span><span class="op">;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        button<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(<span class="st">&quot;show-popup-options-dialog&quot;</span>)<span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> button<span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">disableExtractPopups</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.disableExtractPopups&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>        localStorage<span class="op">.</span><span class="fu">setItem</span>(<span class="st">&quot;extract-popups-disabled&quot;</span><span class="op">,</span> <span class="st">&quot;true&quot;</span>)<span class="op">;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="fu">cleanup</span>()<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="fu">injectPopupsDisabledShowPopupOptionsDialogButton</span>()<span class="op">;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">enableExtractPopups</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.enableExtractPopups&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>        localStorage<span class="op">.</span><span class="fu">removeItem</span>(<span class="st">&quot;extract-popups-disabled&quot;</span>)<span class="op">;</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Run setup.</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="fu">setup</span>()<span class="op">;</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="co">/*  Since the main document has already loaded, we must trigger the</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co">            processing of targets (and add event handlers) manually.</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">            */</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(Extracts<span class="op">.</span><span class="at">contentContainersSelector</span>)<span class="op">.</span><span class="fu">forEach</span>(container <span class="kw">=&gt;</span> {</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">addTargetsWithin</span>(container)<span class="op">;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">setUpAnnotationLoadEventWithin</span>(container)<span class="op">;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>        GW<span class="op">.</span><span class="at">notificationCenter</span><span class="op">.</span><span class="fu">addHandlerForEvent</span>(<span class="st">&quot;GW.contentDidLoad&quot;</span><span class="op">,</span> Extracts<span class="op">.</span><span class="at">signalAnnotationLoaded</span>)<span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        GW<span class="op">.</span><span class="at">notificationCenter</span><span class="op">.</span><span class="fu">addHandlerForEvent</span>(<span class="st">&quot;GW.contentLoadDidFail&quot;</span><span class="op">,</span> Extracts<span class="op">.</span><span class="at">signalAnnotationLoadFailed</span>)<span class="op">;</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Remove the icon/button.</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="fu">removePopupsDisabledShowPopupOptionsDialogButton</span>()<span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">showPopupOptionsDialog</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.showPopupOptionsDialog&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        Popups<span class="op">.</span><span class="fu">hidePopupContainer</span>()<span class="op">;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Create the options dialog, if needed.</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span> <span class="op">==</span> <span class="kw">null</span>) {</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> enabledRadioButtonChecked <span class="op">=</span> Extracts<span class="op">.</span><span class="fu">popupsEnabled</span>() <span class="op">?</span> <span class="vs">`checked=&quot;&quot;`</span> <span class="op">:</span> <span class="vs">``</span><span class="op">;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> disabledRadioButtonChecked <span class="op">=</span> Extracts<span class="op">.</span><span class="fu">popupsEnabled</span>() <span class="op">?</span> <span class="vs">``</span> <span class="op">:</span> <span class="vs">`checked=&quot;&quot;`</span><span class="op">;</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span> <span class="op">=</span> <span class="fu">addUIElement</span>(<span class="vs">`&lt;div id=&#39;popup-options-dialog&#39; style=&#39;display: none;&#39;&gt;&lt;div&gt;`</span> <span class="op">+</span> </span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>                <span class="vs">`&lt;h1&gt;Popups&lt;/h1&gt;`</span> <span class="op">+</span> </span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>                <span class="vs">`&lt;form class=&quot;option-buttons&quot;&gt;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="vs">                    &lt;label&gt;</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;input class=&quot;popups-enable&quot; name=&quot;popups-enable-status&quot; </span><span class="sc">${</span>enabledRadioButtonChecked<span class="sc">}</span><span class="vs"> value=&quot;enabled&quot; type=&quot;radio&quot;&gt;</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;span class=&#39;button-text&#39;&gt;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="vs">                            &lt;span class=&#39;label&#39;&gt;Enable&lt;/span&gt;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="vs">                            &lt;span class=&#39;explanation&#39;&gt;Show popups when hovering over annotated links.&lt;/span&gt;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;/span&gt;</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="vs">                    &lt;/label&gt;</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a><span class="vs">                    &lt;label&gt;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;input class=&quot;popups-disable&quot; name=&quot;popups-enable-status&quot; </span><span class="sc">${</span>disabledRadioButtonChecked<span class="sc">}</span><span class="vs"> value=&quot;disabled&quot; type=&quot;radio&quot;&gt;</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;span class=&#39;button-text&#39;&gt;</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="vs">                            &lt;span class=&#39;label&#39;&gt;Disable&lt;/span&gt;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="vs">                            &lt;span class=&#39;explanation&#39;&gt;Don’t show popups.&lt;/span&gt;</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="vs">                        &lt;/span&gt;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="vs">                    &lt;/label&gt;</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="vs">                &lt;/form&gt;`</span> <span class="op">+</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>                <span class="vs">`&lt;button type=&#39;button&#39; class=&#39;close-button&#39;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 320 512&quot;&gt;&lt;path d=&quot;M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z&quot;/&gt;&lt;/svg&gt;&lt;/button&gt;`</span> <span class="op">+</span> </span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>                <span class="vs">`&lt;button type=&#39;button&#39; class=&#39;save-button&#39;&gt;Save&lt;/button&gt;`</span> <span class="op">+</span> </span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>                <span class="vs">`&lt;/div&gt;&lt;/div&gt;`</span>)<span class="op">;</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>            <span class="co">//  Add event listeners.</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>            <span class="fu">requestAnimationFrame</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>                Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> Extracts<span class="op">.</span><span class="at">popupOptionsDialogBackdropClicked</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupOptionsDialogBackdropClicked&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">event</span><span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>                    Extracts<span class="op">.</span><span class="fu">fadePopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>                Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">firstElementChild</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> Extracts<span class="op">.</span><span class="at">popupOptionsDialogClicked</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupOptionsDialogClicked&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">event</span><span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>                Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;button.close-button&quot;</span>)<span class="op">.</span><span class="fu">addActivateEvent</span>(Extracts<span class="op">.</span><span class="at">popupOptionsDialogCloseButtonClicked</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupOptionsDialogCloseButtonClicked&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>                    Extracts<span class="op">.</span><span class="fu">fadePopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>                Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;button.save-button&quot;</span>)<span class="op">.</span><span class="fu">addActivateEvent</span>(Extracts<span class="op">.</span><span class="at">popupOptionsDialogSaveButtonClicked</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupOptionsDialogSaveButtonClicked&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>                    Extracts<span class="op">.</span><span class="fu">savePopupOptions</span>()<span class="op">;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>                    Extracts<span class="op">.</span><span class="fu">fadePopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>                <span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;keyup&quot;</span><span class="op">,</span> Extracts<span class="op">.</span><span class="at">popupOptionsDialogKeyUp</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupOptionsDialogKeyUp&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span> allowedKeys <span class="op">=</span> [ <span class="st">&quot;Escape&quot;</span><span class="op">,</span> <span class="st">&quot;Esc&quot;</span> ]<span class="op">;</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> (<span class="op">!</span>allowedKeys<span class="op">.</span><span class="fu">includes</span>(<span class="bu">event</span><span class="op">.</span><span class="fu">key</span>) <span class="op">||</span> Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">==</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">event</span><span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>                    Extracts<span class="op">.</span><span class="fu">fadePopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>                })<span class="op">;</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="fu">querySelector</span>(Extracts<span class="op">.</span><span class="fu">popupsEnabled</span>() <span class="op">?</span> <span class="st">&quot;input.popups-enable&quot;</span> <span class="op">:</span> <span class="st">&quot;input.popups-disable&quot;</span>)<span class="op">.</span><span class="at">checked</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Un-hide the options dialog.</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">fadePopupOptionsDialog</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.fadePopupOptionsDialog&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">toggle</span>(<span class="st">&quot;fading&quot;</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>        <span class="pp">setTimeout</span>(Extracts<span class="op">.</span><span class="at">hidePopupOptionsDialog</span><span class="op">,</span> <span class="dv">150</span>)<span class="op">;</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">hidePopupOptionsDialog</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.hidePopupOptionsDialog&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>        Popups<span class="op">.</span><span class="fu">unhidePopupContainer</span>()<span class="op">;</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span> <span class="op">!=</span> <span class="kw">null</span>) {</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span> <span class="op">=</span> <span class="st">&quot;none&quot;</span><span class="op">;</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">toggle</span>(<span class="st">&quot;fading&quot;</span><span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">savePopupOptions</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.savePopupOptions&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupOptionsDialog</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;input.popups-enable&quot;</span>)<span class="op">.</span><span class="at">checked</span>)</span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">enableExtractPopups</span>()<span class="op">;</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="fu">disableExtractPopups</span>()<span class="op">;</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">injectPopupsDisabledShowPopupOptionsDialogButton</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.injectPopupsDisabledShowPopupOptionsDialogButton&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">!=</span> <span class="kw">null</span>)</span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Create and inject the button.</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">=</span> <span class="fu">addUIElement</span>(<span class="vs">`&lt;div id=&quot;popups-disabled-show-popup-options-dialog-button&quot;&gt;`</span> <span class="op">+</span> </span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>            <span class="vs">`&lt;button type=&quot;button&quot; title=&quot;Show options for link popups. (Popups are currently disabled.)&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 640 512&quot;&gt;&lt;path d=&quot;M64 352c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L368 416h2L64 179.5V352zm569.8 106.1l-77.6-60c12.1-11.6 19.8-28 19.8-46.1V64c0-35.3-28.7-64-64-64H128c-21.5 0-40.4 10.7-52 27L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z&quot;/&gt;&lt;/svg&gt;&lt;/button&gt;`</span> <span class="op">+</span> <span class="vs">`&lt;/div&gt;`</span>)<span class="op">;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Add event listener.</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>        <span class="fu">requestAnimationFrame</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;button&quot;</span>)<span class="op">.</span><span class="fu">addActivateEvent</span>(Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButtonClicked</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>                <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.popupsDisabledShowPopupOptionsDialogButtonClicked&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>                <span class="bu">event</span><span class="op">.</span><span class="fu">stopPropagation</span>()<span class="op">;</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>                Extracts<span class="op">.</span><span class="fu">showPopupOptionsDialog</span>()<span class="op">;</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a>            })<span class="op">;</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>        <span class="co">//  Show/hide the button on scroll up/down.</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>        <span class="fu">addScrollListener</span>(Extracts<span class="op">.</span><span class="at">updatePopupsDisabledShowPopupOptionsDialogButtonVisibility</span><span class="op">,</span> </span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;updatePopupsDisabledShowPopupOptionsDialogButtonVisibilityScrollListener&quot;</span>)<span class="op">;</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">updatePopupsDisabledShowPopupOptionsDialogButtonVisibility</span> <span class="op">=</span> (<span class="bu">event</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;updatePopupsDisabledShowPopupOptionsDialogButtonVisibility&quot;</span><span class="op">,</span> <span class="st">&quot;rewrite.js&quot;</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">==</span> <span class="kw">null</span>)</span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Hide button when scrolling a full page down.</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (GW<span class="op">.</span><span class="at">scrollState</span><span class="op">.</span><span class="at">unbrokenDownScrollDistance</span> <span class="op">&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span>)</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">toggle</span>(<span class="st">&quot;hidden&quot;</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Show back-to-top link on ANY scroll up.</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (GW<span class="op">.</span><span class="at">scrollState</span><span class="op">.</span><span class="at">unbrokenUpScrollDistance</span> <span class="op">&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerHeight</span> <span class="op">||</span> GW<span class="op">.</span><span class="at">scrollState</span><span class="op">.</span><span class="at">lastScrollTop</span> <span class="op">&lt;=</span> <span class="dv">0</span>)</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>            Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span><span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">toggle</span>(<span class="st">&quot;hidden&quot;</span><span class="op">,</span> <span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="at">removePopupsDisabledShowPopupOptionsDialogButton</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>        <span class="fu">GWLog</span>(<span class="st">&quot;Extracts.removePopupsDisabledShowPopupOptionsDialogButton&quot;</span><span class="op">,</span> <span class="st">&quot;extracts.js&quot;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">==</span> <span class="kw">null</span>)</span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span><span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>        Extracts<span class="op">.</span><span class="at">popupsDisabledShowPopupOptionsDialogButton</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a><span class="co">//  Inject “popups disabled” icon/button, if need be.</span></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="op">!</span>Extracts<span class="op">.</span><span class="fu">popupsEnabled</span>())</span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>    Extracts<span class="op">.</span><span class="fu">injectPopupsDisabledShowPopupOptionsDialogButton</span>()<span class="op">;</span></span></code></pre></div>
